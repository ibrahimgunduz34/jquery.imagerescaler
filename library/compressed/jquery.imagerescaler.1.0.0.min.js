(function(a){a._ImageRescaler=function(c,b){this.object=c;this.options=b;this.rescale(c,b)};a._ImageRescaler.prototype={getImageRate:function(){return this.object.width>=this.object.height?this.object.height/this.object.width:this.object.width/this.object.height},getScaledCanvasSize:function(){canvas=this.options.canvas;scale=this.options.scale;return{width:canvas.width*(scale/100),height:canvas.height*(scale/100)}},rescale:function(){canvas=this.getScaledCanvasSize();rate=this.getImageRate();if(this.object.width>this.object.height){this.object.width=canvas.width;this.object.height=canvas.width*rate}else{this.object.height=canvas.height;this.object.width=canvas.height*rate}}};a._ImageRescaler.defaults={canvas:{width:200,height:150},scale:100};a.fn.extend({imageRescaler:function(b){var c=a.extend({},a._ImageRescaler.defaults,b);return this.each(function(){new a._ImageRescaler(this,c)})}})})(window.jQuery);